@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix : <http://example.org/rules/> .
@prefix dbo: <http://dbpedia.org/ontology/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix cap: <http://www.hsu-ifa.de/ontologies/capability-model#> .
@prefix OPCUA: <http://www.hsu-ifa.de/ontologies/OpcUa#>.
@prefix ISA88: <http://www.hsu-ifa.de/ontologies/ISA88-TR#>. 
@prefix DINEN61360: <http://www.hsu-ifa.de/ontologies/DINEN61360#>.
@base <http://example.com/base>.


# Definition of PLC-Skills
 :SkillDefinition a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];

    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/{./ancestor::pou/addData/data/ObjectId}/skillFB#{@name}";
        rr:class cap:OpcUaVariableSkill;
    ];
        rr:predicateObjectMap[
        rr:predicate OPCUA:nodeId;
        rr:objectMap[
            rr:template "ns=4;s=|var|CODESYS Control Win V3 x64.{./ancestor::resource/@name}.{./ancestor::resource/task/pouInstance/@name}.{@name}";
            rr:datatype xsd:string;
        ]
    ].

 # Skill has SkillParameters
:SkillSkillParameters a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/{./ancestor::pou/addData/data/ObjectId}/skillFB#{@name}";
        rr:class cap:OpcUaVariableSkill;
    ];
    
        rr:predicateObjectMap [
        rr:predicate cap:hasSkillParameter, OPCUA:UAVariable;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/skillFB/{@name}/SkillParameter#{./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/interface/inputVars/variable[./type/derived/@name='TJ.SkillParameter']/@name}";
            rr:class OPCUA:UAVariable; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate cap:hasSkillOutput, OPCUA:UAVariable;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/skillFB/{@name}/SkillParameter#{./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/interface/outputVars/variable[./type/derived/@name='TJ.SkillParameter']/@name}";
            rr:class OPCUA:UAVariable; 
                ]
        ].
        

 # SkillParameter Definition 
:SkillParameters a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/inputVars/variable[./type/derived/@name='TJ.SkillParameter']"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/skillFB/{./ancestor::addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]/@name}/SkillParameter#{@name}";
        rr:class cap:SkillParameter, OPCUA:UAVariable;
    ];
        rr:predicateObjectMap [
        rr:predicate OPCUA:nodeId;
        rr:objectMap [
            rr:template "ns=4;s=|var|CODESYS Control Win V3 x64.{./ancestor::resource/@name}.{./ancestor::resource/task/pouInstance/@name}.{@name}";
            rr:datatype xsd:string; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate cap:value;
        rr:objectMap [
            rr:template "{./initialValue/structValue/value[@member='value']/simpleValue/@value}";
            rr:datatype xsd:string; 
                ]
             ];
        rr:predicateObjectMap [
        rr:predicate cap:hasDefaultValue; 
        rr:objectMap [
            rr:template "{./initialValue/structValue/value[@member='default']/simpleValue/@value}";
            rr:datatype xsd:string; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate cap:hasParameterName; 
        rr:objectMap [
            rr:template "{./initialValue/structValue/value[@member='name']/simpleValue/@value}";
            rr:datatype xsd:string; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate cap:hasParameterType; 
        rr:objectMap [
            rr:template "{./initialValue/structValue/value[@member='paramType']/simpleValue/@value}";
            rr:datatype xsd:string; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate cap:isRequired; 
        rr:objectMap [
            rr:template "{./initialValue/structValue/value[@member='required']/simpleValue/@value}";
            rr:datatype xsd:boolean; 
                ]
        ].

#Definition SkillOutput
:SkillOutput a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/outputVars/variable[./type/derived/@name='TJ.SkillParameter']"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/skillFB/{./ancestor::addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]/@name}/SkillParameter#{@name}";
        rr:class cap:SkillOutput, OPCUA:UAVariable;
    ];
        rr:predicateObjectMap [
        rr:predicate OPCUA:nodeId;
        rr:objectMap [
            rr:template "ns=4;s=|var|CODESYS Control Win V3 x64.{./ancestor::resource/@name}.{./ancestor::resource/task/pouInstance/@name}.{@name}";
            rr:datatype xsd:string; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate cap:value;
        rr:objectMap [
            rr:template "{./initialValue/structValue/value[@member='value']/simpleValue/@value}";
            rr:datatype xsd:string; 
                ]
             ];
        rr:predicateObjectMap [
        rr:predicate cap:hasDefaultValue; 
        rr:objectMap [
            rr:template "{./initialValue/structValue/value[@member='default']/simpleValue/@value}";
            rr:datatype xsd:string; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate cap:hasParameterName; 
        rr:objectMap [
            rr:template "{./initialValue/structValue/value[@member='name']/simpleValue/@value}";
            rr:datatype xsd:string; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate cap:hasParameterType; 
        rr:objectMap [
            rr:template "{./initialValue/structValue/value[@member='paramType']/simpleValue/@value}";
            rr:datatype xsd:string; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate cap:isRequired; 
        rr:objectMap [
            rr:template "{./initialValue/structValue/value[@member='required']/simpleValue/@value}";
            rr:datatype xsd:boolean; 
                ]
        ].

# Skill has ISA88-StateMachine and current State Output
:SkillStatesStateMachine a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/{./ancestor::pou/addData/data/ObjectId}/skillFB#{@name}";
        rr:class cap:OpcUaVariableSkill;
    ];


        rr:predicateObjectMap[
        rr:predicate cap:hasStateMachine;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_StateMachine";
            rr:class ISA88:StateMachine
        ]
    ];
        rr:predicateObjectMap[
        rr:predicate cap:hasCurrentStateOutput;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput";
            rr:class cap:CurrentStateOutput, OPCUA:UAVariable, DINEN61360:Instance_Description
        ]
    ].
 
# CurrentStateOutput Definition
:CurrentStateOutput a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput";
        rr:class cap:CurrentStateOutput, OPCUA:UAVariable, DINEN61360:Instance_Description ;
    ];
        rr:predicateObjectMap [
        rr:predicate OPCUA:nodeId;
        rr:objectMap [
            rr:template "ns=4;s=|var|CODESYS Control Win V3 x64.{./ancestor::resource/@name}.{./ancestor::resource/task/pouInstance/@name}.currentState";
            rr:datatype xsd:string; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Idle_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Starting_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Execute_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Holding_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Unholding_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Held_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Completing_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Complete_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Aborting_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Aborted_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Clearing_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Stopping_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Stopped_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Resetting_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Suspending_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Suspended_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Unsuspending_DE";
            rr:class DINEN61360:Data_Element; 
                ]
        ].

#DataElement Definition of StateOutput Idle
:IdleOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Idle_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Idle";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Starting
:StartingOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Starting_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Starting";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Execute
:ExecuteOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Execute_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Execute";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].        

#DataElement Definition of StateOutput Holding
:HoldingOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Holding_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Holding";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Held
:HeldOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Held_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Held";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].        

#DataElement Definition of StateOutput Unholding
:UnholdingOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Unholding_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Unholding";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Suspending
:SuspendingOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Suspending_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Suspending";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Suspended
:SuspendedOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Suspended_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Suspended";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Unsuspending
:UnsuspendingOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Unsuspending_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Unsuspending";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Completing
:CompletingOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Completing_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Completing";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Complete
:CompleteOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Complete_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Complete";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Resetting
:ResettingOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Resetting_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Resetting";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Aborting
:AbortingOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Aborting_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Aborting";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Aborted
:AbortedOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Aborted_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Aborted";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Clearing
:ClearingOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Clearing_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Clearing";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Stopping
:StoppingOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Stopping_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Stopping";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

#DataElement Definition of StateOutput Stopped
:StoppedOutput_DE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput_Stopped_DE";
        rr:class DINEN61360:Data_Element;
    ];
        rr:predicateObjectMap [
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap [
            rr:template "http://hsu-ifa.de/PLC2Skill/currentState_Stopped";
            rr:class DINEN61360:Instance_Description; 
                ]
        ].

# Skill has SkillCommands
:SkillSkillCommand a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/{./ancestor::pou/addData/data/ObjectId}/skillFB#{@name}";
        rr:class cap:OpcUaVariableSkill;
    ];

        rr:predicateObjectMap[
        rr:predicate cap:hasSkillCommand;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_SkillCommand";
            rr:class cap:SkillCommand, OPCUA:UAVariable, DINEN61360:Instance_Description;
        ]
    ].

# SkillCommand Definition
:SkillCommandDefinition a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_SkillCommand";
        rr:class cap:SkillCommand, OPCUA:UAVariable, DINEN61360:Instance_Description;
    ];
        rr:predicateObjectMap[
        rr:predicate OPCUA:nodeId;
        rr:objectMap[
            rr:template "ns=4;s=|var|CODESYS Control Win V3 x64.{./ancestor::resource/@name}.{./ancestor::resource/task/pouInstance/@name}.{@name}.transition";
            rr:datatype xsd:string
        ]
        
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_StartCommand";
            rr:class DINEN61360:Data_Element
        ]
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_HoldCommand";
            rr:class DINEN61360:Data_Element
        ]
    ];
    
        rr:predicateObjectMap[
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_UnholdCommand";
            rr:class DINEN61360:Data_Element
        ]
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_SuspendCommand";
            rr:class DINEN61360:Data_Element
        ]
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_UnsuspendCommand";
            rr:class DINEN61360:Data_Element
        ]
    ];
    
        rr:predicateObjectMap[
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_ResetCommand";
            rr:class DINEN61360:Data_Element
        ]
    ];
    
        rr:predicateObjectMap[
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_StopCommand";
            rr:class DINEN61360:Data_Element
        ]
    ];
    
        rr:predicateObjectMap[
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_AbortCommand";
            rr:class DINEN61360:Data_Element
        ]
    ];
    
        rr:predicateObjectMap[
        rr:predicate DINEN61360:is_Instance_Description_of_Data_Element;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_ClearCommand";
            rr:class DINEN61360:Data_Element
        ]
    ].

#Definition of Data Elements for Commands

:StartCommandDE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_StartCommand";
        rr:class OPCUA:UAVariable;
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/StartCommand";
            rr:class DINEN61360:Data_Element
        ]
    ].

:HoldCommandDE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_HoldCommand";
        rr:class OPCUA:UAVariable;
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/HoldCommand";
            rr:class DINEN61360:Data_Element
        ]
    ].

:UnholdCommandDE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_UnholdCommand";
        rr:class OPCUA:UAVariable;
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/UnholdCommand";
            rr:class DINEN61360:Data_Element
        ]
    ].

:SuspendCommandDE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_SuspendCommand";
        rr:class OPCUA:UAVariable;
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/SuspendCommand";
            rr:class DINEN61360:Data_Element
        ]
    ].

:UnsuspendCommandDE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_UnsuspendCommand";
        rr:class OPCUA:UAVariable;
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/UnsuspendCommand";
            rr:class DINEN61360:Data_Element
        ]
    ].

:ResetCommandDE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_ResetCommand";
        rr:class OPCUA:UAVariable;
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/ResetCommand";
            rr:class DINEN61360:Data_Element
        ]
    ].

:AbortCommandDE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_AbortCommand";
        rr:class OPCUA:UAVariable;
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/AbortCommand";    
            rr:class DINEN61360:Data_Element
        ]
    ].

:ClearCommandDE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_ClearCommand";
        rr:class OPCUA:UAVariable;
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/ClearCommand";
            rr:class DINEN61360:Data_Element
        ]
    ].

:StopCommandDE a rr:TriplesMap;
    rml:logicalSource[
        rml:source "TestImplementierung240321.xml";
        rml:referenceFormulation ql:XPath;
        rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]"
            ];
    rr:subjectMap [
        rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_StopCommand";
        rr:class OPCUA:UAVariable;
    ];
        rr:predicateObjectMap[
        rr:predicate DINEN61360:has_Instance_Description;
        rr:objectMap[
            rr:template "http://hsu-ifa.de/PLC2Skill/StopCommand";
            rr:class DINEN61360:Data_Element
        ]
    ].
    

#Definition OPC-UA-Server

:OPCUAServer a rr:TriplesMap;
  rml:logicalSource [
    rml:source "TestImplementierung240321.xml";
    rml:referenceFormulation ql:XPath;
    rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]" ];

  rr:subjectMap [
    rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_OPCUAServer";
	rr:class OPCUA:UAServer
  ];	
  

  	rr:predicateObjectMap [
    rr:predicate OPCUA:hasNodeSet;
    rr:objectMap [
	rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_OPCUANodeSet";
	rr:class OPCUA:UANodeSet
]];
	
	rr:predicateObjectMap [
    rr:predicate OPCUA:hasEndpointUrl;
    rr:objectMap [   
	rr:template "ServerURL";
	rr:datatype xsd:string
]];	
		rr:predicateObjectMap [
    rr:predicate OPCUA:hasSecurityPolicy;
    rr:objectMap [
	rr:template "http://www.hsu-ifa.de/ontologies/OpcUa#SecurityPolicy_None";
	rr:class OPCUA:SecurtiyPolicy
]];
	
	rr:predicateObjectMap [
    rr:predicate OPCUA:hasMessageSecurityMode;
    rr:objectMap [
	rr:template "http://www.hsu-ifa.de/ontologies/OpcUa#MessageSecurityMode_None";
	rr:class OPCUA:MessageSecurityMode
		]].

#Definition Nodes of Nodeset

:OPCUANodeSet a rr:TriplesMap;
  rml:logicalSource [
    rml:source "TestImplementierung240321.xml";
    rml:referenceFormulation ql:XPath;
    rml:iterator "./project/instances/configurations/configuration/resource/addData/data/pou/interface/localVars/variable[./type/derived/@name=./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/@name]" ];

  rr:subjectMap [
    rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_OPCUANodeSet";
	rr:class OPCUA:UANodeSet
  ];
#Node Skill  
  	rr:predicateObjectMap [
    rr:predicate OPCUA:containsNode;
    rr:objectMap [
	rr:template "http://hsu-ifa.de/PLC2Skill/{./ancestor::pou/addData/data/ObjectId}/skillFB#{@name}";
	rr:class OPCUA:UAVariable
]];	
  
#Node SkillParameter
  	rr:predicateObjectMap [
    rr:predicate OPCUA:containsNode;
    rr:objectMap [
	rr:template "http://hsu-ifa.de/PLC2Skill/skillFB/{@name}/SkillParameter#{./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/interface/inputVars/variable[./type/derived/@name='TJ.SkillParameter']/@name} ";
	rr:class OPCUA:UAVariable
]];

#Node SkillOutput
  	rr:predicateObjectMap [
    rr:predicate OPCUA:containsNode;
    rr:objectMap [
	rr:template "http://hsu-ifa.de/PLC2Skill/skillFB/{@name}/SkillParameter#{./ancestor::addData/data/pou[./interface/addData/data/Inheritance/Extends='TJ.Skill']/interface/outputVars/variable[./type/derived/@name='TJ.SkillParameter']/@name} ";
	rr:class OPCUA:UAVariable
]];
#Node CurrentStateOutput
  	rr:predicateObjectMap [
    rr:predicate OPCUA:containsNode;
    rr:objectMap [
	rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput";
	rr:class OPCUA:UAVariable
]];
#Node CurrentStateOutput
  	rr:predicateObjectMap [
    rr:predicate OPCUA:containsNode;
    rr:objectMap [
	rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_CurrentStateOutput";
	rr:class OPCUA:UAVariable
]];
#Node SkillCommand
  	rr:predicateObjectMap [
    rr:predicate OPCUA:containsNode;
    rr:objectMap [
	rr:template "http://hsu-ifa.de/PLC2Skill/#{@name}_SkillCommand";
	rr:class OPCUA:UAVariable
]].